---
layout: post
title: MRD加速器
categories: [自组网, OCAP, 通信]
description: MRD加速器使用指南
keywords: 自组网, 通信, OCAP
mermaid: false
sequence: false
flow: false
mathjax: false
mindmap: false
mindmap2: false
---

## MRD

### MRD输入数据结构

输入数据以包为单位进行处理，每个采样点为 32 比特，其中实部和虚部各 16 比特。起始位置为包描述符，因而包大小为 dft_size*4+包描述符。输入包描述符共占16字节。

以下为和代码中对应的输入参数选项：

| 参数 | 类型 |宽度 | 说明 |实际值|
|------|------|------|------|------|
|`s32p_dest_add`|`SINT32_PTR`|32|输出数据地址|输出地址|
|`b_dest_add_valid`|`BOOLEAN`|1|`0`：输出数据由buffer manager 控制。`1`：输出数据地址为`s32p_dest_add`|`TRUE`|
|`s32_out_buf_number`|`SINT32`|2|输出buffer选择，可选0-3|`0`|
|`s32_dft_size`|`SINT32`|10|变换样点索引|`7`：对应2048点|
|`s32_dft_samples`|`SINT32`|13|发给MRD的采样点数|`2048`|
|`s32_dft_offset`|`SINT32`|12|输入数据补零个数/输出数据提取时跳过个数|`0`|
|`s32_pad_extract`|`SINT32`|2|输入数据补零/输出数据提取选择。`0`：不使能，`1`：使能输入补0，`2`：使能输出提取|`0`|
|`s32_alpha`|`SINT32`|24|变换频移/相位梯度（规范为 pi 的弧度）在正负 1 之间的有符号数，格式为定点 Q1.23|`0`|
|`s32_beta`|`SINT32`|16|变换相移/相位偏置（规范为 pi 的角度）在正负 1 之间的有符号数，格式为定点 Q1.15|`0`|
|`s32_nco_lpo`|`SINT32`|2|频移/相移选择，`0`：不使能，`1`：使能频移，`2`：使能相移|`0`|
|`b_inverse_dft`|`BOOLEAN`|1|正反向FFT变换，`0`：正向，`1`：反向|`0`，`1`|
|`b_scaling_type`|`BOOLEAN`|1|缩放策略选择，`0`：自动缩放，`1`：固定缩放|`1`|
|`s32_fixed_scaling_scheme`|`SINT32`|2|固定缩放选择|`1`，`0`|
|`s32_header_repetition`|`SINT32`|8|重复包描述符，指示本包后面有几包数据发送到MRD，不包含包描述符，使用此包描述符|`0`|
|`s32_reserved`|`UINT32`|2|保留|/|